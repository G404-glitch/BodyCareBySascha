<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Body Care by Sasha â€” Demo</title>
  <meta name="description" content="Body Care by Sasha - Services & Products"/>

  <!-- Minimal reset + Google fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700;900&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --accent:#ff2d55; /* flashy red */
      --bg:#fff;
      --card:#fff;
      --text:#111;
      --muted:#666;
      --glass: rgba(255,255,255,0.6);
    }
    [data-theme="dark"]{
      --bg:#0b0b0d;
      --card:#0f1113;
      --text:#ececec;
      --muted:#9aa0a6;
      --glass: rgba(255,255,255,0.04);
    }
    *{box-sizing:border-box}
    body{font-family:Montserrat, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; margin:0;background:linear-gradient(180deg,var(--bg),#f8f5f7);color:var(--text);min-height:100vh}
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 28px;backdrop-filter: blur(6px);background:var(--glass);position:sticky;top:0;z-index:10}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#ff8ba7);display:grid;place-items:center;color:white;font-weight:900;font-family:'Playfair Display'}
    nav{display:flex;gap:10px;align-items:center}
    button, .btn{cursor:pointer;border:0;padding:10px 14px;border-radius:10px;background:var(--card);box-shadow: 0 6px 18px rgba(0,0,0,0.06);}
    .primary{background:linear-gradient(90deg,var(--accent),#ff8ba7);color:white}
    main{padding:28px;max-width:1100px;margin:18px auto}
    .grid{display:grid;gap:18px}

    /* hero */
    .hero{display:grid;grid-template-columns:1fr 360px;gap:24px;align-items:center}
    .card{background:var(--card);border-radius:16px;padding:20px;box-shadow: 0 10px 30px rgba(0,0,0,0.06)}
    .services .service{padding:14px;border-radius:12px;display:flex;justify-content:space-between;align-items:center}
    .service h4{margin:0}
    .collapse{max-height:0;overflow:hidden;transition:max-height .28s ease}

    /* products */
    .products{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
    .product{padding:12px;border-radius:12px}
    .product img{width:100%;height:140px;object-fit:cover;border-radius:10px}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:8px}

    /* admin & login */
    .modal{position:fixed;inset:0;background:rgba(11,11,13,0.6);display:none;place-items:center;padding:20px}
    .modal .card{width:100%;max-width:760px}
    .row{display:flex;gap:12px}
    input,textarea,select{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,0.08);background:transparent;color:var(--text)}

    /* flux */
    .flux-item{padding:14px;border-radius:12px}
    video{max-width:100%;border-radius:10px}

    footer{padding:20px;text-align:center;color:var(--muted)}

    /* responsive */
    @media (max-width:880px){.hero{grid-template-columns:1fr}.logo{width:48px;height:48px}}
  </style>
</head>
<body data-theme="light">

<header>
  <div class="brand">
    <div class="logo">S</div>
    <div>
      <div style="font-weight:700">Body Care<br/><small style="font-weight:400;color:var(--muted)">by Sasha</small></div>
    </div>
  </div>

  <nav>
    <input id="search" placeholder="Rechercher produits..." style="padding:8px 12px;border-radius:999px;border:1px solid rgba(0,0,0,0.06);min-width:220px" />
    <button id="langToggle" title="FranÃ§ais / English">FR/EN</button>
    <button id="themeToggle" title="Light / Dark">ðŸŒ“</button>
    <button id="loginBtn" class="btn">Se connecter</button>
    <button id="adminOpen" class="btn">Admin</button>
  </nav>
</header>

<main>
  <section class="grid hero">
    <div class="card">
      <h1 id="heroTitle">Soin & BeautÃ© â€” Modern Spa</h1>
      <p id="heroDesc">Accueil court en franÃ§ais et anglais. DÃ©couvrez nos soins et produits naturels.</p>

      <div style="margin-top:18px" class="card services">
        <h3>Nos services</h3>
        <div id="servicesList">
          <!-- services generated by JS -->
        </div>
      </div>

    </div>

    <aside class="card">
      <h3 id="productsTitle">Produits Ã  la une</h3>
      <div id="productsGrid" class="products"></div>
      <hr style="margin:12px 0" />
      <div style="display:flex;gap:8px;align-items:center;justify-content:space-between">
        <small id="userGreeting">InvitÃ©</small>
        <div>
          <button id="openDashboard" class="btn">Mon espace</button>
        </div>
      </div>
    </aside>
  </section>

  <section style="margin-top:20px" class="grid">
    <div class="card">
      <h3>Flux â€” Promotions & Tutoriels</h3>
      <div id="fluxList"></div>
    </div>

    <div class="card">
      <h3>Chat client</h3>
      <div id="chatBox" style="height:260px;overflow:auto;padding:8px;border-radius:8px;background:linear-gradient(180deg,transparent,rgba(0,0,0,0.02));"></div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <input id="chatInput" placeholder="Message au service client..." />
        <button id="sendChat" class="primary">Envoyer</button>
      </div>
    </div>
  </section>

</main>

<!-- footer -->
<footer>
  <small>Â© Body Care by Sasha â€” Demo. Replace placeholders (WhatsApp number, Facebook link, admin password) before production.</small>
</footer>

<!-- LOGIN MODAL -->
<div id="modal" class="modal">
  <div class="card" style="padding:18px;">
    <h3 id="modalTitle">Se connecter / S'inscrire</h3>
    <div style="display:grid;gap:8px;margin-top:8px">
      <input id="nameInput" placeholder="Nom / Name" />
      <input id="phoneInput" placeholder="TÃ©lÃ©phone / Phone" />
      <input id="pwdInput" placeholder="Mot de passe / Password" type="password" />
      <div style="display:flex;gap:8px">
        <button id="signup" class="primary">S'inscrire / Sign up</button>
        <button id="signin" class="btn">Se connecter / Sign in</button>
        <button id="closeModal" class="btn">Fermer</button>
      </div>
    </div>
  </div>
</div>

<!-- ADMIN MODAL -->
<div id="adminModal" class="modal">
  <div class="card" style="padding:18px;max-width:900px">
    <h3>ADMIN DASHBOARD</h3>
    <small>Mot de passe admin: <strong id="adminPwdHint">sashaadmin123</strong> (change it)</small>

    <hr />
    <h4>Ajouter un produit</h4>
    <div style="display:grid;gap:6px">
      <input id="pName" placeholder="Nom produit" />
      <input id="pPrice" placeholder="Prix (ex: 5000)" />
      <input id="pQty" placeholder="QuantitÃ©" />
      <input id="pImage" type="file" accept="image/*" />
      <button id="addProduct" class="primary">Ajouter produit</button>
    </div>

    <hr />
    <h4>Publier dans le flux (texte ou vidÃ©o)</h4>
    <textarea id="postText" placeholder="Message promotionnel..."></textarea>
    <input id="postVideo" type="file" accept="video/*" />
    <div style="display:flex;gap:8px;margin-top:8px">
      <button id="publishPost" class="primary">Publier</button>
      <button id="closeAdmin" class="btn">Fermer</button>
    </div>

    <hr />
    <h4>ParamÃ¨tres</h4>
    <input id="fbLink" placeholder="Facebook URL" />
    <input id="whatsappNumber" placeholder="WhatsApp number in international format e.g. +2376..." />
    <div style="display:flex;gap:8px;margin-top:8px">
      <button id="saveSettings" class="btn">Enregistrer</button>
    </div>

  </div>
</div>

<script>
// --------- App data + defaults ----------
const APP = {
  whatsappNumber: '+237XXXXXXXXX',
  fbLink: '',
  adminPassword: 'sashaadmin123',
  lang: 'fr',
};

// default services
const defaultServices = [
  {id:'s1',title:{fr:'Soin de visage',en:'Facial care'},desc:{fr:'Nettoyage, masque et massage.',en:'Cleansing, mask & massage.'}},
  {id:'s2',title:{fr:'Soin de corps',en:'Body treatment'},desc:{fr:'Gommage, hydratation et relaxation.',en:'Scrub, hydration & relaxation.'}},
  {id:'s3',title:{fr:'RÃ©flexologie',en:'Reflexology'},desc:{fr:'Pressions et relaxation ciblÃ©es.',en:'Targeted pressure and relaxation.'}},
  {id:'s4',title:{fr:'Sauna',en:'Sauna'},desc:{fr:'SÃ©ance de sauna privative.',en:'Private sauna session.'}}
];

// initial product examples
const sampleProducts = [
  {id:'p1',name:'Gel de douche',price:3500,qty:12,img:'',desc:'Gel parfumÃ©'},
  {id:'p2',name:'Savon Molato',price:1200,qty:30,img:'',desc:'Savon artisanal'},
  {id:'p3',name:'Lait de chÃ¨vre',price:4500,qty:8,img:'',desc:'Hydratant naturel'}
];

// --------- persistence helpers ---------
function saveState(){
  localStorage.setItem('bcs_state', JSON.stringify({
    products: state.products,
    posts: state.posts,
    users: state.users,
    settings: {whatsappNumber:APP.whatsappNumber, fbLink:APP.fbLink}
  }));
}
function loadState(){
  const raw = localStorage.getItem('bcs_state');
  if(!raw) return null;
  try{ return JSON.parse(raw);}catch(e){return null}
}

// --------- app state ---------
const persisted = loadState();
const state = {
  services: defaultServices,
  products: persisted?.products || sampleProducts,
  posts: persisted?.posts || [],
  users: persisted?.users || [],
  currentUser: null,
};
if(persisted?.settings){ APP.whatsappNumber = persisted.settings.whatsappNumber || APP.whatsappNumber; APP.fbLink = persisted.settings.fbLink || APP.fbLink }

// --------- DOM refs ----------
const servicesList = document.getElementById('servicesList');
const productsGrid = document.getElementById('productsGrid');
const fluxList = document.getElementById('fluxList');
const userGreeting = document.getElementById('userGreeting');
const modal = document.getElementById('modal');
const adminModal = document.getElementById('adminModal');
const adminPwdHint = document.getElementById('adminPwdHint');
adminPwdHint.textContent = APP.adminPassword;

// --------- renderers ----------
function renderServices(){
  servicesList.innerHTML='';
  state.services.forEach(s=>{
    const el = document.createElement('div'); el.className='service';
    el.innerHTML = `<div><h4>${s.title[APP.lang]}</h4><small style='color:var(--muted)'>${s.desc[APP.lang]}</small></div><div><button data-id='${s.id}' class='btn orderService'>Commander</button></div>`;
    servicesList.appendChild(el);
  });
}

function renderProducts(filter=''){
  productsGrid.innerHTML='';
  const items = state.products.filter(p=>p.name.toLowerCase().includes(filter.toLowerCase()) || (p.desc||'').toLowerCase().includes(filter.toLowerCase()));
  items.forEach(p=>{
    const card = document.createElement('div'); card.className='product card';
    const img = p.img ? `<img src='${p.img}' alt='${p.name}'/>` : `<div style='width:100%;height:140px;border-radius:10px;display:grid;place-items:center;background:linear-gradient(90deg,var(--accent),#ff8ba7);color:white'>${p.name}</div>`;
    card.innerHTML = `${img}<div style='margin-top:8px;'><strong>${p.name}</strong><div class='meta'><small>${p.price} FCFA</small><div><button class='btn addToCart' data-id='${p.id}'>Ajouter</button> <button class='primary orderProd' data-id='${p.id}'>Commander</button></div></div></div><div style='margin-top:8px;color:var(--muted)'>${p.qty} en stock</div><div style='margin-top:8px'><small>Commentaires:</small><div><input data-pid='${p.id}' placeholder='Laisser un commentaire...' class='cinput'/> <button data-pid='${p.id}' class='cbtn btn'>Envoyer</button></div><div class='comments' id='comments-${p.id}'></div></div>`;
    productsGrid.appendChild(card);
  });
}

function renderFlux(){
  fluxList.innerHTML='';
  state.posts.slice().reverse().forEach(post=>{
    const el = document.createElement('div'); el.className='flux-item card';
    el.innerHTML = `<div style='display:flex;justify-content:space-between;align-items:center'><strong>${post.title||'Annonce'}</strong><small style='color:var(--muted)'>${new Date(post.date).toLocaleString()}</small></div><p>${post.text||''}</p>${post.video?`<video controls src='${post.video}'></video>`:''}`;
    fluxList.appendChild(el);
  });
}

function renderComments(){
  state.products.forEach(p=>{
    const cbox = document.getElementById('comments-'+p.id);
    if(!cbox) return;
    cbox.innerHTML='';
    (p.comments||[]).forEach(c=>{
      const d=document.createElement('div'); d.style.padding='6px 0'; d.innerHTML=`<strong>${c.name}</strong> <small style='color:var(--muted)'>${new Date(c.date).toLocaleString()}</small><div>${c.text}</div>`;
      cbox.appendChild(d);
    })
  })
}

// --------- interactions ----------

document.getElementById('loginBtn').onclick = ()=>{ modal.style.display='grid'; }
document.getElementById('closeModal').onclick = ()=>{ modal.style.display='none'; }

document.getElementById('signup').onclick = ()=>{
  const name = document.getElementById('nameInput').value.trim();
  const phone = document.getElementById('phoneInput').value.trim();
  const pwd = document.getElementById('pwdInput').value.trim();
  if(!name||!phone||!pwd){alert('Remplissez tous les champs');return}
  if(state.users.find(u=>u.phone===phone)){alert('Utilisateur existe');return}
  const user = {id:'u'+Date.now(),name,phone,password:pwd,created:Date.now()};
  state.users.push(user); state.currentUser = user; saveState(); updateUI(); modal.style.display='none';
}

document.getElementById('signin').onclick = ()=>{
  const phone = document.getElementById('phoneInput').value.trim();
  const pwd = document.getElementById('pwdInput').value.trim();
  const u = state.users.find(x=>x.phone===phone && x.password===pwd);
  if(!u){alert('Utilisateur introuvable ou mot de passe incorrect'); return}
  state.currentUser = u; saveState(); updateUI(); modal.style.display='none';
}

function updateUI(){
  userGreeting.textContent = state.currentUser? state.currentUser.name : 'InvitÃ©';
}

// admin open with password prompt (simple)
document.getElementById('adminOpen').onclick = ()=>{
  const pwd = prompt('Mot de passe admin:');
  if(pwd===APP.adminPassword){ adminModal.style.display='grid'; }
  else alert('Mot de passe invalide');
}

document.getElementById('closeAdmin').onclick = ()=>{ adminModal.style.display='none'; saveState(); }

// add product
document.getElementById('addProduct').onclick = async ()=>{
  const name = document.getElementById('pName').value.trim();
  const price = Number(document.getElementById('pPrice').value)||0;
  const qty = Number(document.getElementById('pQty').value)||0;
  const file = document.getElementById('pImage').files[0];
  let dataUrl='';
  if(file){ dataUrl = await toDataURL(file); }
  const p = {id:'p'+Date.now(),name,price,qty,img:dataUrl,comments:[],desc:''};
  state.products.push(p); saveState(); renderProducts(); renderComments(); alert('Produit ajoutÃ©');
}

// publish post
document.getElementById('publishPost').onclick = async ()=>{
  const text = document.getElementById('postText').value.trim();
  const file = document.getElementById('postVideo').files[0];
  let video='';
  if(file){ video = await toDataURL(file); }
  state.posts.push({id:'post'+Date.now(),text,video,date:Date.now(),title:'Post de Sasha'});
  saveState(); renderFlux(); alert('PubliÃ©');
}

// save settings
document.getElementById('saveSettings').onclick = ()=>{
  APP.fbLink = document.getElementById('fbLink').value.trim();
  APP.whatsappNumber = document.getElementById('whatsappNumber').value.trim() || APP.whatsappNumber;
  saveState(); alert('ParamÃ¨tres sauvegardÃ©s');
}

// chat simple
const chatBox = document.getElementById('chatBox');
function addChat(name,text,who='user'){
  const d = document.createElement('div'); d.style.margin='8px 0'; d.innerHTML = `<div style='font-weight:700'>${name}</div><small style='color:var(--muted)'>${new Date().toLocaleTimeString()}</small><div>${text}</div>`;
  chatBox.appendChild(d); chatBox.scrollTop = chatBox.scrollHeight;
}

document.getElementById('sendChat').onclick = ()=>{
  const txt = document.getElementById('chatInput').value.trim(); if(!txt) return;
  const name = state.currentUser? state.currentUser.name : 'InvitÃ©';
  addChat(name, txt);
  document.getElementById('chatInput').value='';
}

// order actions (services/products) - open WhatsApp prefilled
function openWhatsAppPrefill(text){
  const num = encodeURIComponent(APP.whatsappNumber.replace(/\s/g,''));
  const msg = encodeURIComponent(text);
  const url = `https://wa.me/${num.replace('+','')}?text=${msg}`;
  window.open(url,'_blank');
}

document.addEventListener('click',function(e){
  if(e.target.classList.contains('orderService')){
    const id = e.target.dataset.id; const s = state.services.find(x=>x.id===id);
    const name = state.currentUser?state.currentUser.name:'InvitÃ©';
    const txt = `${APP.lang==='fr'?'Bonjour':'Hello'}, je souhaite commander le service: ${s.title[APP.lang]} - Client: ${name}`;
    openWhatsAppPrefill(txt);
  }
  if(e.target.classList.contains('orderProd')){
    const id = e.target.dataset.id; const p = state.products.find(x=>x.id===id);
    const name = state.currentUser?state.currentUser.name:'InvitÃ©';
    const txt = `${APP.lang==='fr'?'Bonjour':'Hello'}, je souhaite commander le produit: ${p.name} - Client: ${name}`;
    openWhatsAppPrefill(txt);
  }
  if(e.target.classList.contains('cbtn')){
    const pid = e.target.dataset.pid; const inp = document.querySelector(`input.cinput[data-pid='${pid}']`);
    const text = inp.value.trim(); if(!text){alert('Entrez un commentaire');return}
    const user = state.currentUser?state.currentUser.name:'InvitÃ©';
    const p = state.products.find(x=>x.id===pid); p.comments = p.comments||[]; p.comments.push({name:user,text,date:Date.now()}); saveState(); renderComments(); inp.value='';
  }
});

// comments and rendering helpers
function toDataURL(file){return new Promise((res,rej)=>{const fr=new FileReader();fr.onload=()=>res(fr.result);fr.onerror=rej;fr.readAsDataURL(file)})}

// search
document.getElementById('search').addEventListener('input',e=>{renderProducts(e.target.value)})

// theme and lang toggle
const themeToggle = document.getElementById('themeToggle'); themeToggle.onclick = ()=>{ const root=document.body; if(root.getAttribute('data-theme')==='dark'){root.setAttribute('data-theme','light')}else{root.setAttribute('data-theme','dark')} }
const langToggle = document.getElementById('langToggle'); langToggle.onclick = ()=>{ APP.lang = APP.lang==='fr'?'en':'fr'; translate(); renderServices(); renderProducts(); renderFlux(); }

function translate(){
  if(APP.lang==='fr'){
    document.getElementById('heroTitle').textContent='Soin & BeautÃ© â€” Modern Spa';
    document.getElementById('heroDesc').textContent='Accueil court en franÃ§ais et anglais. DÃ©couvrez nos soins et produits naturels.';
    document.getElementById('productsTitle').textContent='Produits Ã  la une';
    document.getElementById('modalTitle').textContent="Se connecter / S'inscrire";
  }else{
    document.getElementById('heroTitle').textContent='Care & Beauty â€” Modern Spa';
    document.getElementById('heroDesc').textContent='Short intro in French and English. Discover our treatments & natural products.';
    document.getElementById('productsTitle').textContent='Featured products';
    document.getElementById('modalTitle').textContent='Sign in / Sign up';
  }
}

// comments render on load
renderServices(); renderProducts(); renderFlux(); renderComments(); updateUI();

// small UX: close modals on outside click
document.querySelectorAll('.modal').forEach(m=>m.addEventListener('click',e=>{ if(e.target===m) m.style.display='none'}));

// deploy helper: Export state to JSON
window.exportState = ()=>{ const data = JSON.stringify({products:state.products,posts:state.posts,users:state.users},null,2); const blob=new Blob([data],{type:'application/json'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='bcs-data.json'; a.click(); }

// final save at intervals
setInterval(saveState,3000);

</script>

</body>
</html>
